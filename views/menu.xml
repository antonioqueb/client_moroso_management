<!-- client_moroso_management/views/menu.xml -->
<odoo>
    <!-- Menú principal (aplicación) -->
    <record id="client_moroso_management_main_menu" model="ir.ui.menu">
        <field name="name">Gestión Morosos</field>
        <field name="sequence">10</field>
        <!-- QUITAMOS la línea con 'icon' porque no existe en Odoo 17 -->
        
        <!-- Usamos solo web_icon para mostrar el ícono de la app -->
        <field name="web_icon">client_moroso_management,static/description/icon.png</field>
        
        <field name="groups_id" eval="[]"/>
        <!-- 
            Sin 'app_id' porque, con 'application=True' en __manifest__.py,
            Odoo ya lo tratará como aplicación.
        -->
    </record>

    <!-- Acción de ventana para visualizar solo los contactos morosos -->
    <record id="action_morosos_tree" model="ir.actions.act_window">
        <field name="name">Clientes Morosos</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('moroso','=', True)]</field>
        <field name="context">{}</field>
    </record>

    <!-- Submenú que llama a la acción anterior -->
    <menuitem id="menu_morosos"
              name="Clientes Morosos"
              parent="client_moroso_management_main_menu"
              sequence="10"
              action="action_morosos_tree"
              groups="client_moroso_management.group_moroso_manager"/>
</odoo>
